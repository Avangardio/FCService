"use strict";(self.webpackChunkCLient_app=self.webpackChunkCLient_app||[]).push([[398,727],{7778:function(e,t,a){a.r(t),a.d(t,{pageSetupConfiguration:function(){return n}});var n=function(e,t){return{method:"post",url:"https://avangardio-1.ru/page/pageSetup",withCredentials:!0,data:{uId:e,pageData:t}}}},6398:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var n=a(2791),r=a(885),u=a(4569),i=a.n(u),s=a(7448),o=a(184);function c(){var e=(0,n.useState)(""),t=(0,r.Z)(e,2),a=t[0],u=t[1],c=(0,n.useState)(""),l=(0,r.Z)(c,2),d=l[0],h=l[1],f=(0,n.useState)(),p=(0,r.Z)(f,2),g=p[0],m=p[1],v=(0,n.useState)(!1),x=(0,r.Z)(v,2),j=x[0],S=x[1],b=(0,n.useState)(""),Z=(0,r.Z)(b,2),C=Z[0],N=Z[1];return j?(0,o.jsx)(s.Z,{userId:C}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("form",{className:"RegistrationForm",onSubmit:function(e){return function(e){e.preventDefault();var t={method:"post",url:"https://avangardio-1.ru/account/register",data:{email:a,password:d}};i()(t).then((function(e){m(e.data.message),e.data.userData.registrationCompleted||(N(e.data.userData.uId),S(!0))})).catch((function(e){m(e.response.data.message)}))}(e)},children:[(0,o.jsx)("input",{value:a,onChange:function(e){return u(e.target.value)},required:!0,name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443..."}),(0,o.jsx)("input",{value:d,onChange:function(e){return h(e.target.value)},required:!0,name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c..."}),(0,o.jsx)("button",{type:"submit",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}),g]})}function l(){return(0,o.jsx)(c,{})}},7448:function(e,t,a){a.d(t,{Z:function(){return u}});a(2791);var n=a(5727),r=a(184);function u(e){var t=e.userId;return(0,r.jsx)(n.default,{userId:t})}},5727:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(885),r=a(2791),u=a(9434),i=a(4569),s=a.n(i),o=a(9085),c=a(6501),l=a(184),d=c.P.instance.socket,h=a(7778).pageSetupConfiguration,f=a(5774).getPageConfiguration;function p(e){var t,a=e.userId,i=(0,u.v9)((function(e){return e.userState.uId})),c=(0,r.useState)(!1),p=(0,n.Z)(c,2),g=p[0],m=p[1],v=(0,r.useState)(),x=(0,n.Z)(v,2),j=x[0],S=x[1],b=(0,r.useState)(!1),Z=(0,n.Z)(b,2),C=(Z[0],Z[1]),N=(0,r.useState)(""),P=(0,n.Z)(N,2),y=P[0],I=P[1],w=(0,r.useState)({width:0,height:0}),D=(0,n.Z)(w,2),A=(D[0],D[1]),O=(0,r.useState)(),k=(0,n.Z)(O,2),F=k[0],L=(k[1],(0,r.useState)()),_=(0,n.Z)(L,2),q=_[0],M=(_[1],(0,r.useState)("")),U=(0,n.Z)(M,2),E=U[0],H=U[1],R=(0,r.useState)(""),T=(0,n.Z)(R,2),W=T[0],z=T[1],B=(0,r.useState)(""),G=(0,n.Z)(B,2),J=G[0],K=G[1],Q=(0,r.useState)(""),V=(0,n.Z)(Q,2),X=V[0],Y=V[1],$=(0,r.useState)(""),ee=(0,n.Z)($,2),te=ee[0],ae=ee[1],ne=(0,r.useState)(""),re=(0,n.Z)(ne,2),ue=re[0],ie=re[1],se=(0,r.useState)({unit:"%",x:25,y:25,width:50,height:50}),oe=(0,n.Z)(se,2);oe[0],oe[1];return(0,r.useEffect)((function(){if(i||a)return s()(f(i||a)).then((function(e){m(!0),S(!0);var t=e.data.page;H(t?t.firstName:""),z(t?t.lastName:""),C(!1),I(t?t.profilePhoto:""),K(t?t.city:""),Y(t?t.aboutMe:""),ae(t?t.birthDay:"")})).catch((function(e){m(!0),404===e.response.status&&S(!1)})),d.on("UPLOAD_PHOTO_ANSWER",(function(e){var t=new Image;t.src=e,t.onload=function(){C(!0),A({height:t.height,width:t.width}),I(e)}})),function(){d.off("UPLOAD_PHOTO_ANSWER")}}),[i]),g&&(t=(0,l.jsxs)("div",{className:"PageSetup",children:[j?(0,l.jsx)("h1",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"}):(0,l.jsx)("h1",{children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"}),(0,l.jsx)("div",{className:"PageSetupForm",children:(0,l.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),s()(h(i||a,{firstName:E,lastName:W,profilePhoto:y,uploadedAvatar:F,uploadedMiniAvatar:q,city:J,aboutMe:X,birthDay:te})).then((function(e){ie("Page Update Success!"===e.data.message?"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e":e.data.message)})).catch((function(e){e&&console.log(e)}))}(e)},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"firstName",children:(0,l.jsx)("b",{children:"\u0418\u043c\u044f:"})}),(0,l.jsx)("input",{name:"firstName",required:!0,value:E,onChange:function(e){return H(e.target.value)},placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"lastName",children:(0,l.jsx)("b",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"})}),(0,l.jsx)("input",{name:"lastName",required:!0,value:W,onChange:function(e){return z(e.target.value)},placeholder:"\u0412\u0430\u0448\u0430 \u0444\u0430\u043c\u0438\u043b\u0438\u044f."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"age",children:(0,l.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f:"})}),(0,l.jsx)("input",{name:"age",value:te,onChange:function(e){return ae(e.target.value)},type:"date"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"city",children:(0,l.jsx)("b",{children:"\u0413\u043e\u0440\u043e\u0434:"})}),(0,l.jsx)("input",{name:"city",value:J,onChange:function(e){return K(e.target.value)},placeholder:"\u0412\u0430\u0448 \u0433\u043e\u0440\u043e\u0434."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"aboutMe",children:(0,l.jsx)("b",{children:"\u041e \u0441\u0435\u0431\u0435:"})}),(0,l.jsx)("textarea",{name:"aboutMe",value:X,onChange:function(e){return Y(e.target.value)},placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435."})]}),(0,l.jsxs)("div",{className:"PageSetupAvatar",children:[(0,l.jsx)("input",{type:"button",onClick:function(){return document.querySelector("#ChatImageLoad").click()}}),y?(0,l.jsx)("img",{className:"UserPageImage",src:y}):null,(0,l.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t.size>6291456?o.Am.error("\u0424\u0430\u0439\u043b \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439!"):d.emit("UPLOAD_PHOTO",t,t.name)},accept:"image/png, image/jpeg",id:"ChatImageLoad"})]}),(0,l.jsx)("button",{type:"submit",children:(0,l.jsx)("b",{children:"\u0412\u043d\u0435\u0441\u0442\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})})]})}),(0,l.jsx)("p",{children:ue})]})),(0,l.jsx)("div",{children:t})}}}]);
//# sourceMappingURL=398.ab3a881e.chunk.js.map