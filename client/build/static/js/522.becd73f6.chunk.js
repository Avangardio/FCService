"use strict";(self.webpackChunkCLient_app=self.webpackChunkCLient_app||[]).push([[522,727],{4661:function(e,t,n){n.r(t),n.d(t,{loginConfiguration:function(){return a}});var a=function(e,t){return{method:"post",url:"https://avangardio-1.ru/account/login",withCredentials:!0,data:{email:e,password:t}}}},7778:function(e,t,n){n.r(t),n.d(t,{pageSetupConfiguration:function(){return a}});var a=function(e,t){return{method:"post",url:"https://avangardio-1.ru/page/pageSetup",withCredentials:!0,data:{uId:e,pageData:t}}}},6522:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(2791),r=n(885),u=n(4569),i=n.n(u),s=n(8203),o=n(9434),l=n(6871),c=n(7448),d=n(184),h=n(4661).loginConfiguration;function f(){var e=(0,a.useState)(""),t=(0,r.Z)(e,2),n=t[0],u=t[1],f=(0,a.useState)(""),g=(0,r.Z)(f,2),p=g[0],m=g[1],v=(0,a.useState)(),x=(0,r.Z)(v,2),j=x[0],S=x[1],b=(0,a.useState)(!1),C=(0,r.Z)(b,2),Z=C[0],w=C[1],N=(0,a.useState)(""),P=(0,r.Z)(N,2),y=P[0],I=P[1],L=(0,l.s0)(),A=(0,o.v9)((function(e){return e.userState.uId})),O=(0,o.I0)();A&&"/login"===window.location.pathname.toLowerCase()&&L("/");return Z?(0,d.jsx)(c.Z,{userId:y}):(0,d.jsxs)("div",{children:[(0,d.jsxs)("form",{className:"LoginForm",onSubmit:function(e){return function(e){e.preventDefault(),i()(h(n,p)).then((function(e){if(!e.data.registrationCompleted)return I(e.data.user),void w(!0);O(s.Z.authUser(e.data.uId,e.data.registrationCompleted)),S("Login Success"),window.location.reload()})).catch((function(e){console.log(e),S(e.response.data.message)}))}(e)},children:[(0,d.jsx)("input",{value:n,onChange:function(e){return u(e.target.value)},required:!0,name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443..."}),(0,d.jsx)("input",{value:p,onChange:function(e){return m(e.target.value)},required:!0,name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c..."}),(0,d.jsx)("button",{type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]}),j]})}function g(){return(0,d.jsx)(f,{})}},7448:function(e,t,n){n.d(t,{Z:function(){return u}});n(2791);var a=n(5727),r=n(184);function u(e){var t=e.userId;return(0,r.jsx)(a.default,{userId:t})}},5727:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(885),r=n(2791),u=n(9434),i=n(4569),s=n.n(i),o=n(9085),l=n(6501),c=n(184),d=l.P.instance.socket,h=n(7778).pageSetupConfiguration,f=n(5774).getPageConfiguration;function g(e){var t,n=e.userId,i=(0,u.v9)((function(e){return e.userState.uId})),l=(0,r.useState)(!1),g=(0,a.Z)(l,2),p=g[0],m=g[1],v=(0,r.useState)(),x=(0,a.Z)(v,2),j=x[0],S=x[1],b=(0,r.useState)(!1),C=(0,a.Z)(b,2),Z=(C[0],C[1]),w=(0,r.useState)(""),N=(0,a.Z)(w,2),P=N[0],y=N[1],I=(0,r.useState)({width:0,height:0}),L=(0,a.Z)(I,2),A=(L[0],L[1]),O=(0,r.useState)(),D=(0,a.Z)(O,2),k=D[0],F=(D[1],(0,r.useState)()),_=(0,a.Z)(F,2),U=_[0],q=(_[1],(0,r.useState)("")),M=(0,a.Z)(q,2),E=M[0],H=M[1],T=(0,r.useState)(""),R=(0,a.Z)(T,2),W=R[0],z=R[1],B=(0,r.useState)(""),G=(0,a.Z)(B,2),J=G[0],K=G[1],Q=(0,r.useState)(""),V=(0,a.Z)(Q,2),X=V[0],Y=V[1],$=(0,r.useState)(""),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],ae=(0,r.useState)(""),re=(0,a.Z)(ae,2),ue=re[0],ie=re[1],se=(0,r.useState)({unit:"%",x:25,y:25,width:50,height:50}),oe=(0,a.Z)(se,2);oe[0],oe[1];return(0,r.useEffect)((function(){if(i||n)return s()(f(i||n)).then((function(e){m(!0),S(!0);var t=e.data.page;H(t?t.firstName:""),z(t?t.lastName:""),Z(!1),y(t?t.profilePhoto:""),K(t?t.city:""),Y(t?t.aboutMe:""),ne(t?t.birthDay:"")})).catch((function(e){m(!0),404===e.response.status&&S(!1)})),d.on("UPLOAD_PHOTO_ANSWER",(function(e){var t=new Image;t.src=e,t.onload=function(){Z(!0),A({height:t.height,width:t.width}),y(e)}})),function(){d.off("UPLOAD_PHOTO_ANSWER")}}),[i]),p&&(t=(0,c.jsxs)("div",{className:"PageSetup",children:[j?(0,c.jsx)("h1",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"}):(0,c.jsx)("h1",{children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"}),(0,c.jsx)("div",{className:"PageSetupForm",children:(0,c.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),s()(h(i||n,{firstName:E,lastName:W,profilePhoto:P,uploadedAvatar:k,uploadedMiniAvatar:U,city:J,aboutMe:X,birthDay:te})).then((function(e){ie("Page Update Success!"===e.data.message?"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e":e.data.message)})).catch((function(e){e&&console.log(e)}))}(e)},children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"firstName",children:(0,c.jsx)("b",{children:"\u0418\u043c\u044f:"})}),(0,c.jsx)("input",{name:"firstName",required:!0,value:E,onChange:function(e){return H(e.target.value)},placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f."})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"lastName",children:(0,c.jsx)("b",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"})}),(0,c.jsx)("input",{name:"lastName",required:!0,value:W,onChange:function(e){return z(e.target.value)},placeholder:"\u0412\u0430\u0448\u0430 \u0444\u0430\u043c\u0438\u043b\u0438\u044f."})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"age",children:(0,c.jsx)("b",{children:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f:"})}),(0,c.jsx)("input",{name:"age",value:te,onChange:function(e){return ne(e.target.value)},type:"date"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"city",children:(0,c.jsx)("b",{children:"\u0413\u043e\u0440\u043e\u0434:"})}),(0,c.jsx)("input",{name:"city",value:J,onChange:function(e){return K(e.target.value)},placeholder:"\u0412\u0430\u0448 \u0433\u043e\u0440\u043e\u0434."})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"aboutMe",children:(0,c.jsx)("b",{children:"\u041e \u0441\u0435\u0431\u0435:"})}),(0,c.jsx)("textarea",{name:"aboutMe",value:X,onChange:function(e){return Y(e.target.value)},placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435."})]}),(0,c.jsxs)("div",{className:"PageSetupAvatar",children:[(0,c.jsx)("input",{type:"button",onClick:function(){return document.querySelector("#ChatImageLoad").click()}}),P?(0,c.jsx)("img",{className:"UserPageImage",src:P}):null,(0,c.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t.size>6291456?o.Am.error("\u0424\u0430\u0439\u043b \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439!"):d.emit("UPLOAD_PHOTO",t,t.name)},accept:"image/png, image/jpeg",id:"ChatImageLoad"})]}),(0,c.jsx)("button",{type:"submit",children:(0,c.jsx)("b",{children:"\u0412\u043d\u0435\u0441\u0442\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})})]})}),(0,c.jsx)("p",{children:ue})]})),(0,c.jsx)("div",{children:t})}}}]);
//# sourceMappingURL=522.becd73f6.chunk.js.map