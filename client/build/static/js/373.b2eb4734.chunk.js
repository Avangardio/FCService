"use strict";(self.webpackChunkCLient_app=self.webpackChunkCLient_app||[]).push([[373],{7373:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(885),s=a(2791),r=a(9434),i=a(6501),c=a(5107),l=a(4805);function u(e){return"text"===e?null:e.toLocaleUpperCase()}var o=a(904),d=a(184),f=i.P.instance.socket;function h(){(0,r.I0)();var e=(0,r.v9)((function(e){return e.userState.uId})),t=(0,r.v9)((function(e){return e.feedState.feedElements.chats})),a=(0,r.v9)((function(e){return e.feedState.filter}));(0,s.useEffect)((function(){if(e)return f.on("FIND_USERS_INPUT_ANSWER",(function(e){console.log(e)})),function(){f.off("FIND_USERS_INPUT_ANSWER")}}),[e]);var i=(0,l.useMediaQuery)({query:"(min-width: 500px)"}),h=(0,c.useQueryParam)("chat",c.StringParam),m=(0,n.Z)(h,2),v=(m[0],m[1]),C=(0,s.useState)(""),g=(0,n.Z)(C,2);g[0],g[1];var p=Object.keys(t).map((function(e){return t[e]})).filter((function(t){return function(e,t,a){var n=e.messages;return 0!==n.length&&("none"===t||!0===n.slice(-1)[0].unRead&&n.slice(-1)[0].from!==a)}(t,a,e)})).sort((function(e,t){var a;return(null===(a=e.messages)||void 0===a?void 0:a.slice(-1)[0].date)<(null===t||void 0===t?void 0:t.messages.slice(-1)[0].date)?1:-1})),N=p.map((function(t,a){if(0!==t.messages.length){var s,r,i=t.messages.slice(-1)[0],c=(i.messageId,i.body),l=i.from,o=(i.chatId,i.contentType),f=i.unRead,h=Object.keys(t.chatProfiles).map((function(e){return t.chatProfiles[e]})),m=(0,n.Z)(h,2),C=m[0],g=m[1];return s=g?e!==C.uId?C:g:C,r=u(o)?u(o):c,(0,d.jsxs)("div",{"data-id":s.uId,className:!0===f&&l!==e?"ChatHeaderContainer Unread":"ChatHeaderContainer",onClick:function(e){!function(e){e.preventDefault();var t=e.target.closest("div.ChatHeaderContainer").getAttribute("data-id");null!==t&&v(t),v(t)}(e)},children:[(0,d.jsx)("span",{className:"ChatHeaderTitle",children:s.firstName+" "+s.lastName}),(0,d.jsx)("img",{className:"ChatHeaderImage",src:s.profilePhoto,alt:"missing"}),(0,d.jsxs)("div",{className:!0===f&&l===e?"ChatMessageField Unread":"ChatMessageField",children:[(0,d.jsx)("img",{className:"ChatUserImage",src:t.chatProfiles[l].profilePhoto}),(0,d.jsx)("div",{children:t.chatProfiles[l].firstName+":"}),(0,d.jsx)("div",{className:"ChatUserText",children:r})]})]},s.uId)}}));return(0,d.jsxs)("div",{className:i?"ChatOverall":"ChatOverall Mobile",children:[(0,d.jsx)(o.Z,{source:"chat"}),(0,d.jsx)("div",{children:N})]})}}}]);
//# sourceMappingURL=373.b2eb4734.chunk.js.map